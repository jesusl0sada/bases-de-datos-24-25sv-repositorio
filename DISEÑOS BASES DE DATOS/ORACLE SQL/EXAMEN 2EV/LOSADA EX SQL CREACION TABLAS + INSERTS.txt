BASE DE DATOS TALLER MECÁNICO

TABLAS NECESARIAS:
CLIENTE (HECHA)
COCHE (CONTENDRÁ LA FK ID_CLIENTE -> PRIMARY KEY EN TABLA CLIENTE) (HECHA)
MECANICO (HECHA)
COCHE_MECANICO / REPARACION (TABLA INTERMEDIA DE LA RELACIÓN N-M -> CONTENDRÁ LAS FKS ID_COCHE , ID_MECANICO) 
-> UN MECANICO PUEDE REPARAR UN COCHE VARIAS VECES: ADEMÁS TENDRÁ UNA FECHA_REPARACION (PUEDE SER NULL SI 
NO SE HA REPARADO EL COCHE) (HECHA)


CREACIÓN TABLAS:

TABLA CLIENTE: 

CREATE TABLE CLIENTE(
DNI_CLIENTE VARCHAR2(9),
NOMBRE_CLIENTE VARCHAR2(25),
APELLIDOS_CLIENTE VARCHAR2(50),
DIRECCION_CLIENTE VARCHAR2(40),
TELEFONO_CLIENTE NUMBER(9),
CONSTRAINT PK_DNI_CLIENTE PRIMARY KEY (DNI_CLIENTE),
CONSTRAINT NN_NOMBRE_CLIENTE CHECK (NOMBRE_CLIENTE IS NOT NULL),
CONSTRAINT NN_APELLIDOS_CLIENTE CHECK (APELLIDOS_CLIENTE IS NOT NULL),
CONSTRAINT NN_DIRECCION_CLIENTE CHECK (DIRECCION_CLIENTE IS NOT NULL),
CONSTRAINT CK_TELEFONO_CLIENTE CHECK (TELEFONO_CLIENTE > 0),
CONSTRAINT NN_TELEFONO_CLIENTE CHECK (TELEFONO_CLIENTE IS NOT NULL)
);


TABLA COCHE:

CREATE TABLE COCHE(
MATRICULA_COCHE VARCHAR2(7),
DNI_CLIENTE VARCHAR2(9),
MODELO_COCHE VARCHAR2(30),
MARCA_COCHE VARCHAR2(25),
COLOR_COCHE VARCHAR2(20),
KMS_COCHE NUMBER(8),
CONSTRAINT PK_MATRICULA_COCHE PRIMARY KEY (MATRICULA_COCHE),
CONSTRAINT FK_DNI_CLIENTE FOREIGN KEY (DNI_CLIENTE) REFERENCES CLIENTE (DNI_CLIENTE),
CONSTRAINT NN_MODELO_COCHE CHECK (MODELO_COCHE IS NOT NULL),
CONSTRAINT NN_MARCA_COCHE CHECK (MARCA_COCHE IS NOT NULL),
CONSTRAINT NN_COLOR_COCHE CHECK (COLOR_COCHE IS NOT NULL),
CONSTRAINT NN_KMS_COCHE CHECK (KMS_COCHE IS NOT NULL),
CONSTRAINT CK_KMS_COCHE CHECK (KMS_COCHE >= 0)
);


TABLA MECANICO:

CREATE TABLE MECANICO(
DNI_MECANICO VARCHAR2(9),
NOMBRE_MECANICO VARCHAR2(25),
APELLIDOS_MECANICO VARCHAR2(50),
SALARIO_MECANICO NUMBER(5),
FECHA_CONTRATACION_MECANICO DATE,
CONSTRAINT PK_DNI_MECANICO PRIMARY KEY (DNI_MECANICO),
CONSTRAINT NN_NOMBRE_MECANICO CHECK (NOMBRE_MECANICO IS NOT NULL),
CONSTRAINT NN_APELLIDOS_MECANICO CHECK (APELLIDOS_MECANICO IS NOT NULL),
CONSTRAINT NN_SALARIO_MECANICO CHECK (SALARIO_MECANICO IS NOT NULL),
CONSTRAINT CK_SALARIO_MECANICO CHECK (SALARIO_MECANICO > 1000),
CONSTRAINT NN_FECHA_CONTRATACION_MECANICO CHECK (FECHA_CONTRATACION_MECANICO IS NOT NULL)
);


TABLA COCHE_MECANICO / REPARACION -> NACIDA DE LA RELACION N/M

CREATE TABLE COCHE_MECANICO(
MATRICULA_COCHE VARCHAR2(7),
DNI_MECANICO VARCHAR2(9),
FECHA_REPARACION DATE,
CONSTRAINT FK_MATRICULA_COCHE FOREIGN KEY (MATRICULA_COCHE) REFERENCES COCHE (MATRICULA_COCHE),
CONSTRAINT FK_DNI_MECANICO FOREIGN KEY (DNI_MECANICO) REFERENCES MECANICO (DNI_MECANICO)
);

-> AQUÍ NO AÑADIRÍAMOS UNA DOBLE PK CON MATRICULA_COCHE Y DNI_MECANICO YA QUE EL MISMO COCHE LO PUEDE REPARAR MÁS VECES EL MISMO MECANICO, 
DEJAMOS LA FECHA_REPARACION CON POSIBILIDAD DE DEJARLA EN NULL, SI ESTÁ NULL QUERRÁ DECIR QUE LA REPARACIÓN NO HA FINALIZADO; POR ENDE, EL COCHE
SEGUIRÁ REPARÁNDOSE -> CLAVE PARA LA CONSULTA NÚMERO 3.


INSERTS 

TABLA CLIENTE:

INSERT INTO CLIENTE VALUES('65432345H', 'Jesus', 'Losada Carreras', 'Calle mazapan 22', 976543212);
INSERT INTO CLIENTE VALUES('37328732Q', 'Daniel', 'Lazar Vadorrey', 'Plaza asuncion 34', 976652345);
INSERT INTO CLIENTE VALUES('73328732L', 'Mario', 'Cortes Cantin', 'Plaza España 4', 665236453);


TABLA COCHE:

INSERT INTO COCHE VALUES('3566HJK', '65432345H', 'Opel Astra', 'Opel', 'Rojo', 155000);
INSERT INTO COCHE VALUES('6653AIK', '37328732Q', 'Opel Ciclon', 'Opel', 'Azul', 145000);
INSERT INTO COCHE VALUES('3489LMZ', '73328732L', 'Audi R6', 'Audi', 'Negro', 79000);


TABLA MECANICO:

INSERT INTO MECANICO VALUES('98342156N', 'Daniel', 'Jesus Ibaniez', '1800', TO_DATE('2007-05-25', 'YYYY-MM-DD'));
INSERT INTO MECANICO VALUES('89432516J', 'Arturo', 'Marco Lopez', '1500', TO_DATE('2019-06-18', 'YYYY-MM-DD'));
INSERT INTO MECANICO VALUES('69132565P', 'Inigo', 'Andres Laya', '2000', TO_DATE('2005-02-02', 'YYYY-MM-DD'));
INSERT INTO MECANICO VALUES('88832565Q', 'Daniel', 'Lalanza', '1200', TO_DATE('2025-02-18', 'YYYY-MM-DD'));


TABLA COCHE_MECANICO -> REPARACION (N/M)

INSERT INTO COCHE_MECANICO VALUES('3566HJK', '98342156N', NULL);
INSERT INTO COCHE_MECANICO VALUES('6653AIK', '89432516J', TO_DATE('2025-03-07', 'YYYY-MM-DD'));
INSERT INTO COCHE_MECANICO VALUES('3489LMZ', '69132565P', TO_DATE('2024-08-21', 'YYYY-MM-DD'));
INSERT INTO COCHE_MECANICO VALUES('6653AIK', '89432516J', NULL);
INSERT INTO COCHE_MECANICO VALUES('3489LMZ', '88832565Q', TO_DATE('2025-03-08', 'YYYY-MM-DD'));